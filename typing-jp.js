"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(a=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var KanaSequence=function(){function e(t){var n=this;_classCallCheck(this,e),this.word=t;this.kanas=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.length){case 0:return[];default:var r=function(e,t){if(e.length>1){var a=e.slice(-2);if(Kana.mapping[a])return[new Kana.Double(n,a),e.slice(0,-2)]}var r=e.slice(-1),o=e.slice(0,-1);switch(r){case"ッ":return[new Kana.Ltu(n,t),o];case"ン":return[new Kana.Nn(n,t),o];default:return[new Kana.Single(n,r),o]}}(t,a),o=_slicedToArray(r,2),u=o[0];return e(o[1],u).concat(u)}}(t)}return _createClass(e,[{key:"getDefaultRoman",value:function(){return this.kanas.reduce(function(e,t){return e+t.getDefaultRoman()},"")}},{key:"getDefaultRomanAfter",value:function(e){return this.kanas.slice(this.kanas.indexOf(e)+1).reduce(function(e,t){return e+t.getDefaultRoman()},"")}}]),e}();KanaSequence.test=function(e){var t=new KanaSequence(e);return[t.getDefaultRoman()].concat(t.kanas.map(function(e){return e.getDefaultRomanAfterThis()}))};var Kana=function(){function e(t){_classCallCheck(this,e),this.seq=t}return _createClass(e,[{key:"getDefaultRoman",value:function(){throw"unsupported operation"}},{key:"getDefaultRomanAfterThis",value:function(){return this.seq.getDefaultRomanAfter(this)}}]),e}();Kana.Single=function(e){function t(e,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.ch=n,a.romans=Kana.mapping[n],a}return _inherits(t,Kana),_createClass(t,[{key:"getDefaultRoman",value:function(){return this.romans[0]}}]),t}(),Kana.Double=function(e){function t(e,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.chs=n,a.romans=Kana.mapping[n],a}return _inherits(t,Kana),_createClass(t,[{key:"getDefaultRoman",value:function(){return this.romans[0]}}]),t}(),Kana.Ltu=function(e){function t(e,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.prev=n,a.romans=["ltu","xtu","ltsu","xtsu"],a}return _inherits(t,Kana),_createClass(t,[{key:"getDefaultRoman",value:function(){if(this.prev){var e=this.prev.getDefaultRoman().charAt(0);if(!"aiueon".includes(e))return e}return this.romans[0]}}]),t}(),Kana.Nn=function(e){function t(e,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.prev=n,a.allowSingleN=n&&!"aiueony".includes(n.getDefaultRoman().charAt(0)),a}return _inherits(t,Kana),_createClass(t,[{key:"getDefaultRoman",value:function(){return this.allowSingleN?"n":"nn"}}]),t}(),Kana.DEFAULT_KANA_MAPPING={"ア":["a"],"イ":["i"],"ウ":["u","wu","whu"],"エ":["e"],"オ":["o"],"カ":["ka","ca"],"キ":["ki"],"ク":["ku","cu","qu"],"ケ":["ke"],"コ":["ko","co"],"サ":["sa"],"シ":["si","shi","ci"],"ス":["su"],"セ":["se","ce"],"ソ":["so"],"タ":["ta"],"チ":["ti","chi"],"ツ":["tu","tsu"],"テ":["te"],"ト":["to"],"ナ":["na"],"ニ":["ni"],"ヌ":["nu"],"ネ":["ne"],"ノ":["no"],"ハ":["ha"],"ヒ":["hi"],"フ":["hu","fu"],"ヘ":["he"],"ホ":["ho"],"マ":["ma"],"ミ":["mi"],"ム":["mu"],"メ":["me"],"モ":["mo"],"ヤ":["ya"],"ユ":["yu"],"ヨ":["yo"],"ラ":["ra"],"リ":["ri"],"ル":["ru"],"レ":["re"],"ロ":["ro"],"ワ":["wa"],"ヲ":["wo"],"ガ":["ga"],"ギ":["gi"],"グ":["gu"],"ゲ":["ge"],"ゴ":["go"],"ザ":["za"],"ジ":["zi","ji"],"ズ":["zu"],"ゼ":["ze"],"ゾ":["zo"],"ダ":["da"],"ヂ":["di"],"ヅ":["du"],"デ":["de"],"ド":["do"],"バ":["ba"],"ビ":["bi"],"ブ":["bu"],"ベ":["be"],"ボ":["bo"],"パ":["pa"],"ピ":["pi"],"プ":["pu"],"ペ":["pe"],"ポ":["po"],"ヴ":["vu"],"ー":["-"],"ァ":["la","xa"],"ィ":["li","xi","lyi","xyi"],"ゥ":["lu","xu"],"ェ":["le","xe","lye","xye"],"ォ":["lo","xo"],"ヵ":["lka","xka"],"ヶ":["lke","xke"],"ヮ":["lwa","xwa"],"ャ":["lya","xya"],"ュ":["lyu","xyu"],"ョ":["lyo","xyo"],"キャ":["kya"],"キィ":["kyi"],"キュ":["kyu"],"キェ":["kye"],"キョ":["kyo"],"シャ":["sya","sha"],"シィ":["syi"],"シュ":["syu","shu"],"シェ":["sye","she"],"ショ":["syo","sho"],"チャ":["tya","cha","cya"],"チィ":["tyi","cyi"],"チュ":["tyu","chu","cyu"],"チェ":["tye","che","cye"],"チョ":["tyo","cho","cyo"],"ニャ":["nya"],"ニィ":["nyi"],"ニュ":["nyu"],"ニェ":["nye"],"ニョ":["nyo"],"ヒャ":["hya"],"ヒィ":["hyi"],"ヒュ":["hyu"],"ヒェ":["hye"],"ヒョ":["hyo"],"ミャ":["mya"],"ミィ":["myi"],"ミュ":["myu"],"ミェ":["mye"],"ミョ":["myo"],"リャ":["rya"],"リィ":["ryi"],"リュ":["ryu"],"リェ":["rye"],"リョ":["ryo"],"ギャ":["gya"],"ギィ":["gyi"],"ギュ":["gyu"],"ギェ":["gye"],"ギョ":["gyo"],"ジャ":["ja","jya","zya"],"ジィ":["jyi","zyi"],"ジュ":["ju","jyu","zyu"],"ジェ":["je","jye","zye"],"ジョ":["jo","jyo","zyo"],"ビャ":["bya"],"ビィ":["byi"],"ビュ":["byu"],"ビェ":["bye"],"ビョ":["byo"],"ピャ":["pya"],"ピィ":["pyi"],"ピュ":["pyu"],"ピェ":["pye"],"ピョ":["pyo"],"イェ":["ye"],"ウァ":["wha"],"ウィ":["whi","wi"],"ウェ":["whe","we"],"ウォ":["who"],"クァ":["qa","kwa"],"クィ":["qi"],"クェ":["qe"],"クォ":["qo"],"ツァ":["tsa"],"ツィ":["tsi"],"ツェ":["tse"],"ツォ":["tso"],"テャ":["tha"],"ティ":["thi"],"テュ":["thu"],"テェ":["the"],"テョ":["tho"],"トァ":["twa"],"トィ":["twi"],"トゥ":["twu"],"トェ":["twe"],"トォ":["two"],"ファ":["fa"],"フィ":["fi"],"フェ":["fe"],"フォ":["fo"],"フャ":["fya"],"フュ":["fyu"],"フョ":["fyo"],"グァ":["gwa"],"グィ":["gwi"],"グゥ":["gwu"],"グェ":["gwe"],"グォ":["gwo"],"ヂャ":["dya"],"ヂィ":["dyi"],"ヂュ":["dyu"],"ヂェ":["dye"],"ヂョ":["dyo"],"デャ":["dha"],"ディ":["dhi"],"デュ":["dhu"],"デェ":["dhe"],"デョ":["dho"],"ドァ":["dwa"],"ドィ":["dwi"],"ドゥ":["dwu"],"ドェ":["dwe"],"ドォ":["dwo"],"ヴァ":["va"],"ヴィ":["vi","vyi"],"ヴェ":["ve","vye"],"ヴォ":["vo"],"ヴャ":["vya"],"ヴュ":["vyu"],"ヴョ":["vyo"]},Kana.mapping=JSON.parse(JSON.stringify(Kana.DEFAULT_KANA_MAPPING)),module.exports={KanaSequence:KanaSequence,Kana:Kana};